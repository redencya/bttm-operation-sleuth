[gd_resource type="Resource" load_steps=7 format=2]

[ext_resource path="res://core/EventSetCollide.gd" type="Script" id=1]
[ext_resource path="res://core/EventDisplayText.gd" type="Script" id=2]

[sub_resource type="Resource" id=60]
script = ExtResource( 2 )
flags = 3
transitions = 1
text = "As a way of showing solidarity with the CLIMATE EFFORTS, your mother began tending for various trees and flowers."

[sub_resource type="Resource" id=61]
script = ExtResource( 2 )
flags = 3
transitions = 2
text = "You haven't had the heart to tell her all of them are made out of plastic. It's fascinating to see how much she cares for those ARTIFICIAL FLORAL ARTIFACTS."

[sub_resource type="Resource" id=62]
script = ExtResource( 1 )
flags = 2
type = 0
absolute_subject_path = "PlasticTree"
value = false

[sub_resource type="GDScript" id=54]
script/source = "extends Resource
class_name EventSheet

signal act_complete
signal auth_complete

enum EventTypes { 
	SET_STATE, 
	SET_COLLIDE, 
	SET_ITEM,
	DISPLAY_TEXT, 
	DISPLAY_ANIMATION,
	}

const ONE_SHOT = Event.EventFlags.ONE_SHOT
const CHAIN_BREAK = Event.EventFlags.CHAIN_BREAK
const AWAIT_INPUT = Event.EventFlags.AWAIT_INPUT

export (EventTypes) var new_event_type
export (bool) var add_new_event
export (Array, Resource) var events

func play_events():
	var i = 0
	while i < events.size():
		var flags = events[i].flags 
		events[i].exec()
		if flags & AWAIT_INPUT:
			yield(InterfaceManager, \"input_given\")

		if ((flags & CHAIN_BREAK ) >> 1 ) & (flags & ONE_SHOT):
			print(\"CBOS \", flags)
			events.remove(i)
			i -= 1
			break
		if flags & CHAIN_BREAK:
			print(\"CB\")
			break
		if flags & ONE_SHOT:
			print(\"OS\")
			events.remove(i)
			i -= 1
		i += 1
"

[resource]
script = SubResource( 54 )
new_event_type = 1
add_new_event = false
events = [ SubResource( 60 ), SubResource( 61 ), SubResource( 62 ) ]
